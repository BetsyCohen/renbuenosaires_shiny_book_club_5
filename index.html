<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <title>index</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto-f0ce5cb2674995913200a1fc90e191db.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-codewindow/codewindow.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="user-feedback" class="slide level2 theme-title center">
<h2>User feedback</h2>
<h3 id="mastering-shiny-book-club">Mastering Shiny Book Club</h3>
<p>Betsy Cohen &amp; Ariana Bardauil</p>
</section>
<section id="objetivos-de-este-encuentro" class="slide level2">
<h2>Objetivos de este encuentro</h2>
<div class="speech pink">
<p><img data-src="assets/cat-theme/profile-01.svg"> Recapitular encuentros anteriores</p>
</div>
<div class="fragment">
<div class="speech purple right">
<p>Capítulo 8: User feedback <img data-src="assets/cat-theme/profile-02.svg"></p>
</div>
</div>
</section>
<section id="section" class="title-slide slide level1 theme-section2 center">
<h1></h1>
<div class="r-fit-text" style="transform: translateY(-15rem);">
<p>¿Qué vimos en los encuentros anteriores?</p>
</div>
</section>

<section>
<section id="encuentro-1" class="title-slide slide level1 theme-section3 center">
<h1>Encuentro 1</h1>
<p>Basic APP &amp; Basic UI</p>
</section>
<section id="capítulos-1-y-2-basic-app-basic-ui" class="slide level2">
<h2>Capítulos 1 y 2: Basic APP &amp; Basic UI</h2>
<div class="fragment">
<div class="r-fit-text">
<p>Construimos nuestra</p>
<p><span class="pink-shadow">primera aplicación</span></p>
<p>en <span class="blue-shadow">shiny</span></p>
</div>
</div>
</section>
<section id="estructura-básica" class="slide level2">
<h2>Estructura básica</h2>
<p><br></p>
<p><img data-src="assets/cat-theme/head-01.svg" class="absolute" style="bottom: 0px; right: 0px; width: 150px; height: 150px; "></p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb1-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb1-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textInput</span>(<span class="st">"name"</span>, <span class="st">"¿Cómo te llamás?"</span>),</span>
<span id="cb1-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="st">"greeting"</span>)</span>
<span id="cb1-6"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-7"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb1-9"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>greeting <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb1-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">"Hola "</span>, input<span class="sc">$</span>name, <span class="st">"!"</span>)</span>
<span id="cb1-11"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb1-12"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-13"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<div>
<ul>
<li class="fragment"><strong>ui</strong> define la interfaz de usuario.</li>
<li class="fragment"><strong>server</strong> define la lógica del servidor (cómo responde la app).</li>
<li class="fragment"><strong>shinyApp(ui, server)</strong> renderiza la app.</li>
</ul>
</div>
</div></div>
</section>
<section id="estructura-básica-1" class="slide level2">
<h2>Estructura básica</h2>
<p><img data-src="assets/cat-theme/head-07.svg" class="absolute" style="top: -50px; right: 300px; width: 150px; height: 150px; "></p>
<p><br></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="imagenes/1.01.basic_app.png" class="quarto-figure quarto-figure-center" width="913"></p>
</figure>
</div>
<!-- ## UI basica -->
<!-- ![](assets/cat-theme/head-24.svg){.absolute top="-50" right="300"} -->
<!-- ::: {.spacer style="height:70%;"} -->
<!-- [fluidPage()]{.brown-text} organiza los componentes en una página -->
<!-- adaptable. -->
<!-- Vimos algunas [entradas o inputs]{.pink-text} como `textInput()` (texto -->
<!-- libre), `numericInput()` (números), `actionButton()` (botones) y -->
<!-- `sliderInput()`. -->
<!-- Y, [salidas (outputs)]{.pink-text} como `textOutput()` que permiten la -->
<!-- lógica reactiva desde el `server()` usando `render...` o `eventReactive` -->
<!-- (para los botones). -->
<!-- ::: -->
</section></section>
<section>
<section id="encuentro-2" class="title-slide slide level1 theme-section4 center">
<h1>Encuentro 2</h1>
<p>Basic reactivity</p>
</section>
<section id="basic-reactivity" class="slide level2">
<h2>Basic reactivity</h2>
<p><img data-src="assets/cat-theme/head-30.svg" class="absolute" style="top: -50px; right: 300px; width: 120px; height: 120px; "> <img data-src="assets/cat-theme/head-31.svg" class="absolute" style="top: -50px; right: 120px; width: 150px; height: 120px; "></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="imagenes/2.01.reactividad.png" class="quarto-figure quarto-figure-center" width="723"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="imagenes/2.02.users.png" class="quarto-figure quarto-figure-center" width="516"></p>
</figure>
</div>
</section>
<section id="programación-declarativa" class="slide level2">
<h2>Programación declarativa</h2>
<p><img data-src="assets/cat-theme/head-07.svg" class="absolute" style="top: -50px; right: 300px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-08.svg" class="absolute" style="top: -50px; right: 150px; width: 150px; height: 150px; "></p>
<p><br></p>
<p>Shiny usa <span class="pink-text">programación declarativa</span></p>
<blockquote>
<p>No le indicamos qué hacer sino qué queremos lograr.</p>
</blockquote>
<p><span class="pink-text">Son aplicaciones perezosas</span>: solo actualizan los outputs visibles, y solo cuando es necesario.</p>
<div class="columns">
<div class="column" style="width:20%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://cdn.pixabay.com/animation/2023/04/28/18/34/18-34-10-554_512.gif" class="quarto-figure quarto-figure-center" width="128" height="109"></p>
</figure>
</div>
</div><div class="column" style="width:80%;">
<p>Si no está vinculado a una salida visible el <span class="brown-text">código puede no ejecutarse nunca</span></p>
</div></div>
</section></section>
<section>
<section id="encuentro-3" class="title-slide slide level1 theme-section5 center">
<h1>Encuentro 3</h1>
<p>Workflow</p>
</section>
<section id="control-de-flujo-debuggeo" class="slide level2">
<h2>Control de flujo &amp; debuggeo</h2>
<p><img data-src="assets/cat-theme/turso-03.svg" class="absolute" style="top: 150px; right: 100px; width: 450px; height: 450px; "></p>
<p>¿Qué puedo usar para saber <span class="blue-text">qué le pasa a mi app</span> ?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="codewindow">
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>() <span class="fu">cat</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="codewindow">
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Abre una app interactiva</span></span>
<span id="cb3-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">eventReactive</span>(input<span class="sc">$</span>go, {</span>
<span id="cb3-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">browser</span>() </span>
<span id="cb3-4"><a href="" aria-hidden="true" tabindex="-1"></a>  input<span class="sc">$</span>a <span class="sc">+</span> input<span class="sc">$</span>b</span>
<span id="cb3-5"><a href="" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="codewindow">
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Al principio del script</span></span>
<span id="cb4-2"><a href="" aria-hidden="true" tabindex="-1"></a>reactlog<span class="sc">::</span><span class="fu">reactlog_enable</span>()</span>
<span id="cb4-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Luego de ejecutar la APP y cerrarla:</span></span>
<span id="cb4-4"><a href="" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">reactlogShow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section></section>
<section>
<section id="encuentro-4" class="title-slide slide level1 theme-section1 center">
<h1>Encuentro 4</h1>
<p>Layout, themes, HTML</p>
</section>
<section id="layouts-diseños-de-página" class="slide level2">
<h2>Layouts (diseños de página)</h2>
<p><img data-src="assets/cat-theme/turso-02.svg" class="absolute" style="top: 50px; right: 50px; width: 450px; height: 450px; "></p>
<div class="spacer" style="height:70%;">
<p><span class="brown-text">Página única</span></p>
<p><code>fluidPage()</code>, <code>fixedPage()</code> ,<code>fillPag()</code> (página)</p>
<p><code>sidebarLayout()</code> , <code>fluidRow()</code> , <code>column()</code> (diseño)</p>
<p><span class="pink-text">Varias páginas</span></p>
<p><code>navbarPage()</code> (página)</p>
<p><code>tabsetPanel()</code>, <code>tabPanel()</code> , <code>navlistPanel()</code> ,<code>navbarMenu()</code> (diseño)</p>
</div>
</section>
<section id="aplicación-de-estilos" class="slide level2">
<h2>Aplicación de estilos</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>HTML</strong></p>
<div class="codewindow">
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>span style<span class="ot">=</span><span class="st">"color:hotpink;"</span><span class="sc">&gt;</span>texto de prueba<span class="sc">&lt;</span><span class="er">/</span>span<span class="sc">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>CSS</strong></p>
<div class="codewindow">
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="" aria-hidden="true" tabindex="-1"></a>.pink<span class="sc">-</span>text {</span>
<span id="cb6-2"><a href="" aria-hidden="true" tabindex="-1"></a>  color<span class="sc">:</span> <span class="fu">darken</span>(<span class="sc">$</span>theme<span class="sc">-</span>pink, <span class="dv">10</span>%);</span>
<span id="cb6-3"><a href="" aria-hidden="true" tabindex="-1"></a>  font<span class="sc">-</span>weight<span class="sc">:</span> bold;</span>
<span id="cb6-4"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="pink-text">texto de prueba</span></p>
</div><div class="column" style="width:50%;">
<p><strong>THEME</strong></p>
<div class="codewindow">
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb7-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb7-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb7-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> <span class="fu">bs_theme</span>(<span class="at">bootswatch =</span> <span class="st">"minty"</span>),</span>
<span id="cb7-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2</span>(<span class="st">"App con tema Minty"</span>),</span>
<span id="cb7-7"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sliderInput</span>(<span class="st">"x"</span>, <span class="st">"Elegí un número"</span>, <span class="dv">1</span>, <span class="dv">100</span>, <span class="dv">50</span>),</span>
<span id="cb7-8"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="st">"valor"</span>)</span>
<span id="cb7-9"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-10"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb7-12"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>valor <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb7-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">"Número:"</span>, input<span class="sc">$</span>x)</span>
<span id="cb7-14"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb7-15"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section></section>
<section id="encuentro-5" class="title-slide slide level1 theme-section6 center">
<h1>Encuentro 5</h1>
<p><span class="brown-text">HOY HOY HOY HOY HOY</span></p>
</section>

<section>
<section id="section-1" class="title-slide slide level1 theme-section7 center">
<h1></h1>
<div class="r-fit-text" style="transform: translateY(-15rem);">
<p><span class="brown-shadow">User feedback</span></p>
</div>
</section>
<section id="el-ux-no-son-los-padres" class="slide level2">
<h2>El UX no son los padres</h2>
<p><img data-src="assets/cat-theme/head-14.svg" class="absolute" style="top: 400px; left: 300px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-15.svg" class="absolute" style="top: 400px; left: 50px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-16.svg" class="absolute" style="top: 200px; left: 300px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-17.svg" class="absolute" style="top: 200px; left: 50px; width: 150px; height: 150px; "></p>
<div class="spacer" style="height:70%; text-align: right;">
<p>Experiencia de <span class="purple-text">usuario</span></p>
<p><span class="blue-text">Interactuar</span> de manera <span class="pink-text">visual</span></p>
<p>Pedagogía refuerzo con <span class="brown-text">estímulo visual</span></p>
</div>
<aside class="notes">
<p>Un concepto central en nuestra app es la <strong>experiencia de usabilidad</strong> o UX</p>
<p>No solo se trata de que todo se vea bonito (como vimos en el capitulo de Themes) sino también de que interactuar o dar un feedback de manera visual ante las diferentes situaciones de interacción que plantea nuestra app.</p>
<p>En shinny de manera automática, pero hay otros que podemos agregar que refuerzan este estímulo</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="tipos-de-feedback" class="slide level2">
<h2>Tipos de feedback</h2>
<p><img data-src="assets/cat-theme/head-12.svg" class="absolute" style="left: 0px; bottom: 0px; width: 150px; height: 150px; "></p>
<p>En el capítulo se recorren 4 posibles formas de feedback usando el ayudín de <code>shinyFeedback</code> y <code>waiter</code>.</p>
<div class="columns">
<div class="column" style="width:70%;">
<div>
<ul>
<li class="fragment">🛑️ Validación</li>
<li class="fragment">⚠ Notificación</li>
<li class="fragment">⌛ Barras de progreso</li>
<li class="fragment">👌 Diálogos de confirmación</li>
<li class="fragment">🔙 Botones de deshacer</li>
</ul>
</div>
</div><div class="column" style="width:30%;">
<p><img data-src="imagenes/shinyfeedback_waiter_hexs.png"></p>
</div></div>
</section>
<section id="validar-una-entrada" class="slide level2 smaller">
<h2>Validar una entrada</h2>
<p><img data-src="assets/cat-theme/head-10.svg" class="absolute" style="bottom: 0px; right: 0px; width: 150px; height: 150px; "></p>
<aside class="notes">
<p>Pensar en cómo el usuario podría usar mal tu aplicación te permite proporcionar mensajes informativos en la interfaz de usuario, en lugar de permitir que los errores se filtren en el código de R y generen errores no informativos.</p>
<p>Un primer paso es validar el tipo de entrada cosa que podemos hacer con el paquete shinyFeedback</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb8" data-code-line-numbers="4,12-15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="fu">library</span>(shiny)</span>
<span id="cb8-2"><a href=""></a></span>
<span id="cb8-3"><a href=""></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb8-4"><a href=""></a>  shinyFeedback<span class="sc">::</span><span class="fu">useShinyFeedback</span>(),</span>
<span id="cb8-5"><a href=""></a>  <span class="fu">numericInput</span>(<span class="st">"n"</span>, <span class="st">"n"</span>, <span class="at">value =</span> <span class="dv">10</span>),</span>
<span id="cb8-6"><a href=""></a>  <span class="fu">textOutput</span>(<span class="st">"half"</span>)</span>
<span id="cb8-7"><a href=""></a>)</span>
<span id="cb8-8"><a href=""></a></span>
<span id="cb8-9"><a href=""></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb8-10"><a href=""></a>  half <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb8-11"><a href=""></a>    even <span class="ot">&lt;-</span> input<span class="sc">$</span>n <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb8-12"><a href=""></a>    shinyFeedback<span class="sc">::</span><span class="fu">feedbackWarning</span>(</span>
<span id="cb8-13"><a href=""></a>      <span class="at">inputId =</span> <span class="st">"n"</span>, </span>
<span id="cb8-14"><a href=""></a>      <span class="at">show =</span> <span class="sc">!</span>even,</span>
<span id="cb8-15"><a href=""></a>      <span class="at">text =</span> <span class="st">"Por favor pone un número par"</span>)</span>
<span id="cb8-16"><a href=""></a>    input<span class="sc">$</span>n <span class="sc">/</span> <span class="dv">2</span>    </span>
<span id="cb8-17"><a href=""></a>  })</span>
<span id="cb8-18"><a href=""></a>  </span>
<span id="cb8-19"><a href=""></a>  output<span class="sc">$</span>half <span class="ot">&lt;-</span> <span class="fu">renderText</span>(<span class="fu">half</span>())</span>
<span id="cb8-20"><a href=""></a>}</span>
<span id="cb8-21"><a href=""></a></span>
<span id="cb8-22"><a href=""></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<div>
<ul>
<li class="fragment">Agregamos <code>useShinyFeedback()</code> en el ui.</li>
<li class="fragment">En el usamos alguna de las funciones de retroalimentación <code>feedback()</code>, <code>feedbackWarning()</code>, <code>feedbackDanger()</code>y <code>feedbackSuccess()</code></li>
<li class="fragment">Todas tienen <span class="blue-text">tres argumentos obligatorios</span> (<strong>inputId</strong>, <strong>show</strong>, <strong>text</strong>) y de manera optativa podemos personalizar con: <span class="purple-text">color</span> y <span class="purple-text">icon</span></li>
</ul>
</div>
</div></div>
</section>
<section id="validar-una-entrada-1" class="slide level2">
<h2>Validar una entrada</h2>
<p><img data-src="assets/cat-theme/turso-01.svg" class="absolute" style="top: 280px; right: 100px; width: 300px; height: 300px; "></p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb9-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb9-4"><a href="" aria-hidden="true" tabindex="-1"></a>  shinyFeedback<span class="sc">::</span><span class="fu">useShinyFeedback</span>(),</span>
<span id="cb9-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">numericInput</span>(<span class="st">"n"</span>, <span class="st">"n"</span>, <span class="at">value =</span> <span class="dv">10</span>),</span>
<span id="cb9-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="st">"half"</span>)</span>
<span id="cb9-7"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-8"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb9-10"><a href="" aria-hidden="true" tabindex="-1"></a>  half <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb9-11"><a href="" aria-hidden="true" tabindex="-1"></a>    even <span class="ot">&lt;-</span> input<span class="sc">$</span>n <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb9-12"><a href="" aria-hidden="true" tabindex="-1"></a>    shinyFeedback<span class="sc">::</span><span class="fu">feedbackWarning</span>(<span class="st">"n"</span>, <span class="sc">!</span>even, <span class="st">"Por favor pone un número par"</span>)</span>
<span id="cb9-13"><a href="" aria-hidden="true" tabindex="-1"></a>    input<span class="sc">$</span>n <span class="sc">/</span> <span class="dv">2</span>    </span>
<span id="cb9-14"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb9-15"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-16"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>half <span class="ot">&lt;-</span> <span class="fu">renderText</span>(<span class="fu">half</span>())</span>
<span id="cb9-17"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-18"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.01.shinyfeedback_sin_rec.png"></p>
</div></div>
</section>
<section id="pausar-la-ejecución-bajo-requisitos" class="slide level2 smaller">
<h2>Pausar la ejecución bajo requisitos</h2>
<p><img data-src="assets/cat-theme/turso-04.svg" class="absolute" style="top: 330px; right: 100px; width: 300px; height: 300px; "></p>
<p>¿Cómo <strong>pausamos la ejecución</strong> para que no ocurra nada hasta que se cumplan ciertas condiciones en nuestro <code>reactive{}</code>? <span class="fragment highlight-purple" data-fragment-index="1">La función <code>req()</code> nos permite agregar requisitos para la ejecucción dentro del server</span>. Por ej. ponemos como requisito que <em>no muestre el resultado si no es un n° par</em></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb10" data-code-line-numbers="16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="fu">library</span>(shiny)</span>
<span id="cb10-2"><a href=""></a></span>
<span id="cb10-3"><a href=""></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb10-4"><a href=""></a>  shinyFeedback<span class="sc">::</span><span class="fu">useShinyFeedback</span>(),</span>
<span id="cb10-5"><a href=""></a>  <span class="fu">numericInput</span>(<span class="st">"n"</span>, <span class="st">"n"</span>, <span class="at">value =</span> <span class="dv">10</span>),</span>
<span id="cb10-6"><a href=""></a>  <span class="fu">textOutput</span>(<span class="st">"half"</span>)</span>
<span id="cb10-7"><a href=""></a>)</span>
<span id="cb10-8"><a href=""></a></span>
<span id="cb10-9"><a href=""></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb10-10"><a href=""></a>  half <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb10-11"><a href=""></a>    even <span class="ot">&lt;-</span> input<span class="sc">$</span>n <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb10-12"><a href=""></a>    shinyFeedback<span class="sc">::</span><span class="fu">feedbackWarning</span>(</span>
<span id="cb10-13"><a href=""></a>      <span class="at">inputId =</span> <span class="st">"n"</span>, </span>
<span id="cb10-14"><a href=""></a>      <span class="at">show =</span> <span class="sc">!</span>even,</span>
<span id="cb10-15"><a href=""></a>      <span class="at">text =</span> <span class="st">"Por favor pone un número par"</span>)</span>
<span id="cb10-16"><a href=""></a>    <span class="fu">req</span>(even)</span>
<span id="cb10-17"><a href=""></a>    input<span class="sc">$</span>n <span class="sc">/</span> <span class="dv">2</span>    </span>
<span id="cb10-18"><a href=""></a>  })</span>
<span id="cb10-19"><a href=""></a>  </span>
<span id="cb10-20"><a href=""></a>  output<span class="sc">$</span>half <span class="ot">&lt;-</span> <span class="fu">renderText</span>(<span class="fu">half</span>())</span>
<span id="cb10-21"><a href=""></a>}</span>
<span id="cb10-22"><a href=""></a></span>
<span id="cb10-23"><a href=""></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.02.shinyfeedback_con_rec.png"></p>
</div></div>
</section>
<section id="pausar-la-ejecución-bajo-requisitos-1" class="slide level2 smaller">
<h2>Pausar la ejecución bajo requisitos</h2>
<p><img data-src="assets/cat-theme/head-21.svg" class="absolute" style="bottom: 150px; right: 250px; width: 150px; height: 150px; "></p>
<p>A veces queremos <em>freezar</em> más de una condición y esperar a que el usuario termine de hacer algo. Por ej. en este caso necesitamos que termine de elegir el idioma (<code>selectInput()</code>) y ponga sunombre (<code>textInput()</code>) para que se ejecute el <strong>greetings</strong> en el <code>paste0()</code></p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb11-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">"language"</span>, <span class="st">"Language"</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"English"</span>, <span class="st">"Maori"</span>)),</span>
<span id="cb11-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textInput</span>(<span class="st">"name"</span>, <span class="st">"Name"</span>),</span>
<span id="cb11-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="st">"greeting"</span>)</span>
<span id="cb11-5"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-6"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb11-8"><a href="" aria-hidden="true" tabindex="-1"></a>  greetings <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb11-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">English =</span> <span class="st">"Hello"</span>, </span>
<span id="cb11-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">Spanish =</span> <span class="st">"Hola"</span></span>
<span id="cb11-11"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-12"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>greeting <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb11-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(input<span class="sc">$</span>language, input<span class="sc">$</span>name)</span>
<span id="cb11-14"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(greetings[[input<span class="sc">$</span>language]], <span class="st">" "</span>, input<span class="sc">$</span>name, <span class="st">"!"</span>)</span>
<span id="cb11-15"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb11-16"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.03.rec_multiple.png"></p>
</div></div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>req() como declaración lógica per se</strong></p>
</div>
<div class="callout-content">
<p>Se puede usar <code>req()</code> con su propia declaración lógica. Por ejemplo: <strong>req(input$a &gt; 0)</strong> permitirá que el cálculo continúe cuando sea mayor que 0.</p>
</div>
</div>
</div>
</section>
<section id="combinando-req-y-shinyfeedback" class="slide level2 smaller">
<h2>Combinando <code>req()</code> y <code>shinyFeedback</code></h2>
<p>Además, podemos combinar <strong>ambas cosas</strong>. En este caso, queremos continuar con el cálculo si el usuario ha ingresado un valor, por lo que con <code>req()</code> chequeamos si el nombre existe y en caso de que <strong>NO</strong> envía un <strong>warning</strong> avisando.</p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb12-2"><a href="" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb12-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(input<span class="sc">$</span>dataset)</span>
<span id="cb12-4"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-5"><a href="" aria-hidden="true" tabindex="-1"></a>    exists <span class="ot">&lt;-</span> <span class="fu">exists</span>(input<span class="sc">$</span>dataset, <span class="st">"package:datasets"</span>)</span>
<span id="cb12-6"><a href="" aria-hidden="true" tabindex="-1"></a>    shinyFeedback<span class="sc">::</span><span class="fu">feedbackDanger</span>(<span class="st">"dataset"</span>, <span class="sc">!</span>exists, <span class="st">"Dataset desconocido"</span>)</span>
<span id="cb12-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(exists, <span class="at">cancelOutput =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-8"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get</span>(input<span class="sc">$</span>dataset, <span class="st">"package:datasets"</span>)</span>
<span id="cb12-10"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb12-11"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-12"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>data <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb12-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="fu">data</span>())</span>
<span id="cb12-14"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb12-15"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.04.validacion_junto_con_rec.png"></p>
</div></div>
<p><sub>(*)&nbsp;Ejemplo&nbsp;retomado&nbsp;del&nbsp;capítulo&nbsp;1</sub></p>
</section>
<section id="validar-multiples-entradas-y-salidas-con-validate" class="slide level2 smaller">
<h2>Validar multiples entradas y salidas con <code>validate()</code></h2>
<p><img data-src="assets/cat-theme/head-02.svg" class="absolute" style="bottom: 50px; right: 370px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-03.svg" class="absolute" style="bottom: 50px; right: 220px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-04.svg" class="absolute" style="bottom: 50px; right: 70px; width: 150px; height: 150px; "></p>
<p>La función integrada de shiny <code>validate()</code> nos va a permitir <span class="pink-text">controlar múltiples entradas</span> <strong>y</strong> tirar el <span class="blue-text">mensaje</span>.</p>
<p>El siguiente código muestra un ejemplo sencillo donde <span class="brown-text">no queremos</span> registrar ni calcular la raíz cuadrada de valores negativos en x.</p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb13-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">numericInput</span>(<span class="st">"x"</span>, <span class="st">"x"</span>, <span class="at">value =</span> <span class="dv">0</span>),</span>
<span id="cb13-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">"trans"</span>, <span class="st">"transformation"</span>, </span>
<span id="cb13-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"square"</span>, <span class="st">"log"</span>, <span class="st">"square-root"</span>)</span>
<span id="cb13-5"><a href="" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb13-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="st">"out"</span>)</span>
<span id="cb13-7"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-8"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb13-10"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>out <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb13-11"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>x <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> input<span class="sc">$</span>trans <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"log"</span>, <span class="st">"square-root"</span>)) {</span>
<span id="cb13-12"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">validate</span>(<span class="st">"El valor que elegiste para tu x no admite ser negativo para aplicarle este cálculo"</span>)</span>
<span id="cb13-13"><a href="" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-14"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-15"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span>(input<span class="sc">$</span>trans,</span>
<span id="cb13-16"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="at">square =</span> input<span class="sc">$</span>x <span class="sc">^</span> <span class="dv">2</span>,</span>
<span id="cb13-17"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="st">"square-root"</span> <span class="ot">=</span> <span class="fu">sqrt</span>(input<span class="sc">$</span>x),</span>
<span id="cb13-18"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="at">log =</span> <span class="fu">log</span>(input<span class="sc">$</span>x)</span>
<span id="cb13-19"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-20"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb13-21"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.05.validacion_con_validate.png"></p>
</div></div>
</section>
<section id="cual-sería-la-diferencia-entre-validate-y-req" class="slide level2 smaller">
<h2>Cual sería la diferencia entre <code>validate()</code> y <code>req()</code></h2>
<p><img data-src="assets/cat-theme/head-02.svg" class="absolute" style="bottom: 50px; right: 370px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-03.svg" class="absolute" style="bottom: 50px; right: 220px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-04.svg" class="absolute" style="bottom: 50px; right: 70px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-24.svg" class="absolute" style="bottom: 50px; right: 530px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-23.svg" class="absolute" style="bottom: 50px; right: 670px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-22.svg" class="absolute" style="bottom: 50px; right: 830px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-21.svg" class="absolute" style="bottom: 50px; right: 970px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-20.svg" class="absolute" style="bottom: 50px; right: 1100px; width: 150px; height: 150px; "> <br></p>
<table class="caption-top">
<colgroup>
<col style="width: 24%">
<col style="width: 26%">
<col style="width: 24%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Función</th>
<th>¿Qué hace?</th>
<th>¿Dónde se usa?</th>
<th>¿Qué muestra si falla?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>req()</code></td>
<td>Verifica que un valor exista o cumpla una condición mínima</td>
<td>Cualquier parte del servidor</td>
<td><strong>Nada</strong> (el output queda en blanco)</td>
</tr>
<tr class="even">
<td><code>validate()</code></td>
<td>Verifica una condición lógica y <strong>muestra un mensaje de error personalizado</strong></td>
<td>Solo dentro de <code>render*()</code> outputs</td>
<td>El <strong>mensaje de error</strong> que le pongas</td>
</tr>
</tbody>
</table>
</section>
<section id="notificaciones" class="slide level2">
<h2>Notificaciones</h2>
<p>Las <span class="pink-text">notificaciones</span> aparecen apiladas en la parte <strong>inferior derecha de la app.</strong></p>
<p><code>showNotification()</code> tiene los siguientes tipos de notificación:</p>
<div>
<ul>
<li class="fragment"><span class="blue-text">transitoria</span>: desaparece después de un período de tiempo fijo.</li>
<li class="fragment"><span class="brown-text">del proceso</span>: aparece cuando se inicia un proceso y al finalizar desaparece.</li>
<li class="fragment"><span class="purple-text">progresivas</span>: actualiza una sola notificación con actualizaciones progresivas</li>
</ul>
</div>
</section>
<section id="notificación-transitoria" class="slide level2 smaller">
<h2>Notificación <span class="blue-text">transitoria</span></h2>
<p><img data-src="assets/cat-theme/head-06.svg" class="absolute" style="top: 0px; right: 0px; width: 120px; height: 120px; "></p>
<p>la forma nás sencilla es <code>showNotification("el mensaje que queres mostrar")</code></p>
<p><span class="pink-text">duration</span> permite estipular una duración, la predeterminada es 5 seg.</p>
<p>se puede configurar el argumento type para <span class="blue-text">tunearlo</span> con un css para <em>“message”</em>, <em>“warning”</em> o <em>“error”</em></p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb14-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb14-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textInput</span>(<span class="st">"nombre"</span>, <span class="st">"Nombre"</span>),</span>
<span id="cb14-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">"enviar"</span>, <span class="st">"Enviar"</span>)</span>
<span id="cb14-6"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-7"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb14-9"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>enviar, {</span>
<span id="cb14-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>nombre <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb14-11"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">showNotification</span>(<span class="st">"Por favor ingresá un nombre"</span>, <span class="at">type =</span> <span class="st">"error"</span>)</span>
<span id="cb14-12"><a href="" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb14-13"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">showNotification</span>(<span class="st">"Formulario enviado correctamente"</span>, <span class="at">type =</span> <span class="st">"message"</span>)</span>
<span id="cb14-14"><a href="" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-15"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb14-16"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-17"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.06.Notificacion_transitoria.png"></p>
</div></div>
</section>
<section id="notificación-del-proceso" class="slide level2">
<h2>Notificación <span class="brown-text">del proceso</span></h2>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb15-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb15-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">"procesar"</span>, <span class="st">"Procesar datos"</span>)</span>
<span id="cb15-5"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-6"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb15-8"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>procesar, {</span>
<span id="cb15-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mostrar notificación persistente mientras se procesa</span></span>
<span id="cb15-10"><a href="" aria-hidden="true" tabindex="-1"></a>    id <span class="ot">&lt;-</span> <span class="fu">showNotification</span>(<span class="st">"Procesando datos..."</span>, <span class="at">duration =</span> <span class="cn">NULL</span>, <span class="at">closeButton =</span> <span class="cn">FALSE</span>, <span class="at">type =</span> <span class="st">"message"</span>)</span>
<span id="cb15-11"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-12"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simular un proceso lento</span></span>
<span id="cb15-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">3</span>)</span>
<span id="cb15-14"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-15"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Eliminar la notificación al terminar</span></span>
<span id="cb15-16"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeNotification</span>(id)</span>
<span id="cb15-17"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-18"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mostrar notificación de éxito que desaparece sola</span></span>
<span id="cb15-19"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showNotification</span>(<span class="st">"¡Datos procesados correctamente!"</span>, <span class="at">type =</span> <span class="st">"message"</span>)</span>
<span id="cb15-20"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb15-21"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-22"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.06.Notificacion_proceso.gif"></p>
</div></div>
</section>
<section id="notificación-de-actualización-progresivas" class="slide level2 smaller">
<h2>Notificación de actualización <span class="purple-text">progresivas</span></h2>
<p>Para <strong>simular una notificación progresiva</strong> en lugar de mostrar notis distintas (una debajo de la otra como si fuera un 🥪) podemos jugar con el parámetro <strong><code>id</code></strong> de <code>showNotification()</code> de forma que va a aparecer como si <em>estuviera actualizando el texto de la misma notificación.</em></p>
<p>👉🏻El parámetro <code>id</code> sirve para ir concatenando esta simulación</p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb16-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb16-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">"start"</span>, <span class="st">"Iniciar carga de datos"</span>),</span>
<span id="cb16-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tableOutput</span>(<span class="st">"data"</span>)</span>
<span id="cb16-6"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-7"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb16-9"><a href="" aria-hidden="true" tabindex="-1"></a>  notify <span class="ot">&lt;-</span> <span class="cf">function</span>(msg, <span class="at">id =</span> <span class="cn">NULL</span>) {</span>
<span id="cb16-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showNotification</span>(msg, <span class="at">id =</span> id, <span class="at">duration =</span> <span class="cn">NULL</span>, <span class="at">closeButton =</span> <span class="cn">FALSE</span>)</span>
<span id="cb16-11"><a href="" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-12"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-13"><a href="" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">eventReactive</span>(input<span class="sc">$</span>start, { </span>
<span id="cb16-14"><a href="" aria-hidden="true" tabindex="-1"></a>    id <span class="ot">&lt;-</span> <span class="fu">notify</span>(<span class="st">"Leyendo datos..."</span>)</span>
<span id="cb16-15"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">on.exit</span>(<span class="fu">removeNotification</span>(id), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-16"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">1</span>)</span>
<span id="cb16-17"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-18"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">notify</span>(<span class="st">"Reticulando splines..."</span>, <span class="at">id =</span> id)</span>
<span id="cb16-19"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">1</span>)</span>
<span id="cb16-20"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-21"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">notify</span>(<span class="st">"Agrupando llamas..."</span>, <span class="at">id =</span> id)</span>
<span id="cb16-22"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">1</span>)</span>
<span id="cb16-23"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-24"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">notify</span>(<span class="st">"Ortogonalizando matrices..."</span>, <span class="at">id =</span> id)</span>
<span id="cb16-25"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">1</span>)</span>
<span id="cb16-26"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-27"><a href="" aria-hidden="true" tabindex="-1"></a>    mtcars  <span class="co"># dataset incorporado en R</span></span>
<span id="cb16-28"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb16-29"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-30"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>data <span class="ot">&lt;-</span> <span class="fu">renderTable</span>(<span class="fu">head</span>(<span class="fu">data</span>()))</span>
<span id="cb16-31"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-32"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-33"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.06.Notificacion_progresiva.gif"></p>
</div></div>
</section>
<section id="barras-de-progreso" class="slide level2 smaller">
<h2>Barras de progreso</h2>
<p>La sensación de paso del tiempo es muy importante desde el punto de vista del UX. Lo que estamos buscando con este tipo de elementos es:</p>
<div class="fragment">
<div class="speech pink">
<p><img data-src="assets/cat-theme/profile-01.svg" width="70"> <strong>Proveer distracción</strong> con imágenes, textos (con un dato curioso por ej.) o sonidos.</p>
</div>
</div>
<div class="fragment">
<div class="speech purple">
<p><img data-src="assets/cat-theme/profile-02.svg" width="70"> Brindar una <strong>explicación</strong> de por qué estas esperando</p>
</div>
</div>
<div class="fragment">
<div class="speech blue">
<p><img data-src="assets/cat-theme/profile-03.svg" width="70"> Dar <strong>certeza</strong> respecto de cuánto tiempo llevará.</p>
</div>
</div>
</section>
<section id="barras-de-progreso-1" class="slide level2">
<h2>Barras de progreso</h2>
<p><img data-src="assets/cat-theme/turso-01.svg" class="absolute" style="top: 200px; right: 100px; width: 220px; height: 220px; "></p>
<div class="spacer" style="height:70%;">
<p>En el libro vemos dos soluciones: una <span class="blue-text">nativa de shiny</span> y otra con el paquete <code>waiter{}</code></p>
<p>Adicionalmente existe la librería <span class="purple-text">{progress}</span></p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Para ambos casos hay que dividir la tarea principal en un número determinado de partes pequeñas que tomen aproximadamente el mismo tiempo.</p>
</div>
</div>
</div>
</div>
</section>
<section id="barras-de-progreso-con-shiny" class="slide level2 smaller">
<h2>Barras de progreso con shiny</h2>
<p>Para crear una barra de progreso con Shiny, necesitas usar <code>withProgress()</code> e <code>incProgress()</code></p>
<p>El primer argumento de <code>incProgress()</code> es la <span class="pink-text"><strong>cantidad que se incrementará</strong></span> en la barra de progreso. Por defecto, <span class="fragment highlight-blue" data-fragment-index="1">la barra de progreso empieza en 0 y termina en 1, por lo que el incremento en 1 dividido por el número de pasos garantizará que la barra de progreso esté completa al final del bucle.</span></p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb17-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">numericInput</span>(<span class="st">"steps"</span>, <span class="st">"How many steps?"</span>, <span class="dv">10</span>),</span>
<span id="cb17-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">"go"</span>, <span class="st">"go"</span>),</span>
<span id="cb17-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="st">"result"</span>)</span>
<span id="cb17-5"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-6"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb17-8"><a href="" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">eventReactive</span>(input<span class="sc">$</span>go, {</span>
<span id="cb17-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">withProgress</span>(<span class="at">message =</span> <span class="st">"Computing random number"</span>, {</span>
<span id="cb17-10"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(input<span class="sc">$</span>steps)) {</span>
<span id="cb17-11"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">Sys.sleep</span>(<span class="fl">0.5</span>)</span>
<span id="cb17-12"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">incProgress</span>(<span class="dv">1</span> <span class="sc">/</span> input<span class="sc">$</span>steps)</span>
<span id="cb17-13"><a href="" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb17-14"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">runif</span>(<span class="dv">1</span>)</span>
<span id="cb17-15"><a href="" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb17-16"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb17-17"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-18"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>result <span class="ot">&lt;-</span> <span class="fu">renderText</span>(<span class="fu">round</span>(<span class="fu">data</span>(), <span class="dv">2</span>))</span>
<span id="cb17-19"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.07.Barra_con_shiny.gif" width="563"></p>
</div></div>
<aside class="notes">
<p>El primer argumento de incProgress()es la cantidad que se incrementará en la barra de progreso. Por defecto, la barra de progreso empieza en 0 y termina en 1, por lo que el incremento en 1 dividido por el número de pasos garantizará que la barra de progreso esté completa al final del bucle.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="el-paquete-waiter" class="slide level2">
<h2>El paquete waiter</h2>
<p><img data-src="assets/cat-theme/turso-02.svg" class="absolute" style="top: 200px; right: 20px; width: 450px; height: 450px; "></p>
<p>El paquete <code>{waiter}</code> tambien nos permite mostrar barras de progreso con waitress y hostess</p>
<p>La acción se define en 4 pasos</p>
<div>
<ol type="1">
<li class="fragment"><p><span class="blue-text">Poner</span> <code>useWaiter</code> en cualquier parte de tu UI.</p></li>
<li class="fragment"><p><span class="brown-text">Crear</span> el waiter</p></li>
<li class="fragment"><p><span class="pink-text">Mostrar</span> el waiter</p></li>
<li class="fragment"><p><span class="purple-text">Ocultar</span> el waiter</p></li>
</ol>
</div>
</section>
<section id="spinners-con-waiter" class="slide level2 smaller">
<h2>Spinners con <code>{waiter}</code></h2>
<p><code>waiter()</code> es ideal para <span class="blue-text">spinners</span>. Permite hacer <strong>barras</strong> más <em>chulas</em> y editar el html o agregar gifs</p>
<p>👉🏻 Por ej. Acá usamos un <code>spin_flower()</code> para que muestre una 🌻mientras carga el gráfico</p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb18-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(waiter)</span>
<span id="cb18-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb18-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">use_waiter</span>(),  <span class="co"># Necesario para que waiter funcione</span></span>
<span id="cb18-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoWaiter</span>(</span>
<span id="cb18-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb18-8"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">html =</span> <span class="fu">tagList</span>(</span>
<span id="cb18-9"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">spin_flowers</span>(),</span>
<span id="cb18-10"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">br</span>(), <span class="fu">br</span>(),</span>
<span id="cb18-11"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tagAppendAttributes</span>(</span>
<span id="cb18-12"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">style =</span> <span class="st">"color:black"</span>,</span>
<span id="cb18-13"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">p</span>(<span class="st">"Cargando tus gráficos"</span>)</span>
<span id="cb18-14"><a href="" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb18-15"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-16"><a href="" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb18-17"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">"trigger"</span>, <span class="st">"Render"</span>),</span>
<span id="cb18-18"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotOutput</span>(<span class="st">"plot"</span>),</span>
<span id="cb18-19"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotOutput</span>(<span class="st">"plot2"</span>)</span>
<span id="cb18-20"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-21"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb18-23"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-24"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>trigger, {</span>
<span id="cb18-25"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-26"><a href="" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb18-27"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Sys.sleep</span>(<span class="dv">3</span>)</span>
<span id="cb18-28"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plot</span>(cars)</span>
<span id="cb18-29"><a href="" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb18-30"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-31"><a href="" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>plot2 <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb18-32"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Sys.sleep</span>(<span class="dv">5</span>)</span>
<span id="cb18-33"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plot</span>(<span class="fu">runif</span>(<span class="dv">100</span>))</span>
<span id="cb18-34"><a href="" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb18-35"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-36"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb18-37"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-38"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-39"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-40"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.08.Spiner_con_waiter.gif"></p>
</div></div>
</section>
<section id="barras-con-waitress" class="slide level2 smaller">
<h2>Barras con <code>waitress</code></h2>
<p>Por default waiter muestra un spinner (y podemos elegir entre más de 100 modelos!) pero también podemos hacer <span class="blue-text">barras</span> usando la funcion <code>useWaitress()</code>en el UI definiendo el waitress con <code>Waitress$new</code>. Dentro de <code>Waitress$new</code> nos permite setear a que elemento le vamos a aplicar la barra (<code>selector</code>), así como un <code>theme</code>, <code>max</code> y <code>min</code> de la barra.</p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb19-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(waiter)</span>
<span id="cb19-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">navbarPage</span>(<span class="st">"Waitress aplicado al nav"</span>,</span>
<span id="cb19-5"><a href="" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">tabPanel</span>(<span class="st">"home"</span>,</span>
<span id="cb19-6"><a href="" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">useWaitress</span>(<span class="at">color =</span> <span class="st">"#7F7FFF"</span>),</span>
<span id="cb19-7"><a href="" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">actionButton</span>(<span class="st">"go"</span>, <span class="st">"Generar gráfico"</span>),</span>
<span id="cb19-8"><a href="" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">plotOutput</span>(<span class="st">"plot"</span>)</span>
<span id="cb19-9"><a href="" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb19-10"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-11"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb19-13"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-14"><a href="" aria-hidden="true" tabindex="-1"></a>  waitress <span class="ot">&lt;-</span> Waitress<span class="sc">$</span><span class="fu">new</span>( <span class="co"># Creamos el objeto waitress una sola vez </span></span>
<span id="cb19-15"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">selector =</span> <span class="st">"nav"</span>, </span>
<span id="cb19-16"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">theme =</span> <span class="st">"overlay-percent"</span>, </span>
<span id="cb19-17"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">min =</span> <span class="dv">0</span>, </span>
<span id="cb19-18"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">max =</span> <span class="dv">10</span></span>
<span id="cb19-19"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-20"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-21"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>go, {</span>
<span id="cb19-22"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-23"><a href="" aria-hidden="true" tabindex="-1"></a>    waitress<span class="sc">$</span><span class="fu">start</span>()  <span class="co"># Muestra el loader</span></span>
<span id="cb19-24"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-25"><a href="" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb19-26"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb19-27"><a href="" aria-hidden="true" tabindex="-1"></a>        waitress<span class="sc">$</span><span class="fu">inc</span>(<span class="dv">1</span>)  <span class="co"># Incrementa 10%</span></span>
<span id="cb19-28"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">Sys.sleep</span>(<span class="fl">0.5</span>)</span>
<span id="cb19-29"><a href="" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb19-30"><a href="" aria-hidden="true" tabindex="-1"></a>      waitress<span class="sc">$</span><span class="fu">close</span>()  <span class="co"># Oculta el loader cuando termina</span></span>
<span id="cb19-31"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">hist</span>(<span class="fu">runif</span>(<span class="dv">100</span>))</span>
<span id="cb19-32"><a href="" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb19-33"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-34"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb19-35"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-36"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-37"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.08.Barra_con_waittress.gif"></p>
</div></div>
</section>
<section id="spinners-con-shinycssloaders" class="slide level2 smaller">
<h2>Spinners con <code>shinycssloaders</code></h2>
<p>Otra forma muy práctica de hacer spinners es con el paquete <code>{shinycssloaders}</code>. Simplemente agregamos <code>shinycssloaders::withSpinner()</code> para envolver el output que queremos que <em>“spinee”</em> automaticamente y asereje!</p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinycssloaders)</span>
<span id="cb20-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb20-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">"go"</span>, <span class="st">"go"</span>),</span>
<span id="cb20-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withSpinner</span>(<span class="fu">plotOutput</span>(<span class="st">"plot"</span>)),</span>
<span id="cb20-6"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-7"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb20-8"><a href="" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">eventReactive</span>(input<span class="sc">$</span>go, {</span>
<span id="cb20-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">3</span>)</span>
<span id="cb20-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">50</span>), <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">50</span>))</span>
<span id="cb20-11"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb20-12"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-13"><a href="" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>(<span class="fu">plot</span>(<span class="fu">data</span>()), <span class="at">res =</span> <span class="dv">96</span>)</span>
<span id="cb20-14"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.09.Spiner_con_shinycssloaders.gif"></p>
</div></div>
</section>
<section id="dudo-luego-altcntrlsupr-confirmación-y-arrepentimientos" class="slide level2 smaller">
<h2>Dudo luego <code>alt</code>+<code>cntrl</code>+<code>supr</code>: confirmación y arrepentimientos</h2>
<div class="fragment">
<div class="speech pink">
<p><img data-src="assets/cat-theme/profile-01.svg"> Pedir la confirmación explicita</p>
</div>
</div>
<div class="fragment">
<div class="speech purple">
<p><img data-src="assets/cat-theme/profile-02.svg"> Botón deshacer</p>
</div>
</div>
<div class="fragment">
<div class="speech blue">
<p><img data-src="assets/cat-theme/profile-03.svg"> Cesto de reciclaje</p>
</div>
</div>
<aside class="notes">
<p>A veces, una acción es potencialmente peligrosa, y conviene asegurarse de que el usuario realmente quiera realizarla o darle la posibilidad de desistir antes de que sea demasiado tarde. En este capitulo se muestran tres técnicas de básicas.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="confirmación-explicita" class="slide level2 smaller">
<h2>Confirmación explicita</h2>
<p><img data-src="assets/cat-theme/head-21.svg" class="absolute" style="bottom: 50px; right: 50px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-21.svg" class="absolute" style="bottom: 50px; right: 180px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-21.svg" class="absolute" style="bottom: 50px; right: 310px; width: 150px; height: 150px; "> <img data-src="assets/cat-theme/head-21.svg" class="absolute" style="bottom: 50px; right: 440px; width: 150px; height: 150px; "></p>
<p>Con la función <code>modalDialog()</code> es como una especie de <em>aduana</em> en la que creamos un nuevo modo de interacción: <span class="purple-text">no se puede interactuar con la app principal hasta que no se haya procesado el diálogo</span>. Lo definimos <strong>fuera del server</strong> y después lo usamos de manera dinámica como <em>eventos condicionales</em> <strong>dentro</strong> del mismo</p>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="" aria-hidden="true" tabindex="-1"></a>modal_confirm <span class="ot">&lt;-</span> <span class="fu">modalDialog</span>(</span>
<span id="cb21-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Are you sure you want to continue?"</span>,</span>
<span id="cb21-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Deleting files"</span>,</span>
<span id="cb21-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">footer =</span> <span class="fu">tagList</span>(</span>
<span id="cb21-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">"cancel"</span>, <span class="st">"Cancel"</span>),</span>
<span id="cb21-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">"ok"</span>, <span class="st">"Delete"</span>, <span class="at">class =</span> <span class="st">"btn btn-danger"</span>)</span>
<span id="cb21-7"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-8"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb21-12"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">"delete"</span>, <span class="st">"Delete all files?"</span>)</span>
<span id="cb21-13"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-14"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb21-17"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>delete, {</span>
<span id="cb21-18"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="do">## en vez de desatar el evento borrar corre el dialogo</span></span>
<span id="cb21-19"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showModal</span>(modal_confirm)</span>
<span id="cb21-20"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-21"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-22"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>ok, {</span>
<span id="cb21-23"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showNotification</span>(<span class="st">"Files deleted"</span>)</span>
<span id="cb21-24"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeModal</span>()</span>
<span id="cb21-25"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-26"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>cancel, {</span>
<span id="cb21-27"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeModal</span>()</span>
<span id="cb21-28"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-29"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-30"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="https://mastering-shiny.org/demos/action-feedback/dialog.png"></p>
</div></div>
</section>
<section id="botón-de-arrepentimiento" class="slide level2 smaller">
<h2>Botón de arrepentimiento</h2>
<p><img data-src="assets/cat-theme/turso-03.svg" class="absolute" style="top: 100px; right: 100px; width: 450px; height: 450px; "></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="spacer" style="height:50%;">
<p>A veces <span class="purple-text">confirmar acciones con un <em>“¿estás seguro?”</em></span> no sirve</p>
<p>Porque los usuarios se acostumbran a clickear <span class="blue-text">Sí</span></p>
<p>Esta opción permite <span class="pink-text">deshacer</span> luego de ejecutar la acción (como pasa con los mails).</p>
<p>Para eso se puede utilizar <code>observeEvent()</code>, se puede llamar a <code>runLater()</code> esperar X segundos y recién realizar la acción o eliminarla.</p>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="ejemplo-de-botón-de-arrepentimiento" class="slide level2">
<h2><span class="pink-text">Ejemplo</span> de botón de arrepentimiento</h2>
<div class="columns">
<div class="column">
<div class="codewindow">
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb22-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textAreaInput</span>(<span class="st">"message"</span>, </span>
<span id="cb22-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="cn">NULL</span>, </span>
<span id="cb22-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">placeholder =</span> <span class="st">"What's happening?"</span>,</span>
<span id="cb22-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">3</span></span>
<span id="cb22-6"><a href="" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb22-7"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">"tweet"</span>, <span class="st">"Tweet"</span>)</span>
<span id="cb22-8"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="" aria-hidden="true" tabindex="-1"></a>runLater <span class="ot">&lt;-</span> <span class="cf">function</span>(action, <span class="at">seconds =</span> <span class="dv">3</span>) {</span>
<span id="cb22-11"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(</span>
<span id="cb22-12"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">invalidateLater</span>(seconds <span class="sc">*</span> <span class="dv">1000</span>), action, </span>
<span id="cb22-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">ignoreInit =</span> <span class="cn">TRUE</span>, </span>
<span id="cb22-14"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">once =</span> <span class="cn">TRUE</span>, </span>
<span id="cb22-15"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">ignoreNULL =</span> <span class="cn">FALSE</span>,</span>
<span id="cb22-16"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">autoDestroy =</span> <span class="cn">FALSE</span></span>
<span id="cb22-17"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-18"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-19"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb22-21"><a href="" aria-hidden="true" tabindex="-1"></a>  waiting <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb22-22"><a href="" aria-hidden="true" tabindex="-1"></a>  last_message <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb22-23"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-24"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>tweet, {</span>
<span id="cb22-25"><a href="" aria-hidden="true" tabindex="-1"></a>    notification <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">"Tweeted '{input$message}'"</span>)</span>
<span id="cb22-26"><a href="" aria-hidden="true" tabindex="-1"></a>    last_message <span class="ot">&lt;&lt;-</span> input<span class="sc">$</span>message</span>
<span id="cb22-27"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateTextAreaInput</span>(session, <span class="st">"message"</span>, <span class="at">value =</span> <span class="st">""</span>)</span>
<span id="cb22-28"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-29"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showNotification</span>(</span>
<span id="cb22-30"><a href="" aria-hidden="true" tabindex="-1"></a>      notification,</span>
<span id="cb22-31"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="at">action =</span> <span class="fu">actionButton</span>(<span class="st">"undo"</span>, <span class="st">"Undo?"</span>),</span>
<span id="cb22-32"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="at">duration =</span> <span class="cn">NULL</span>,</span>
<span id="cb22-33"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="at">closeButton =</span> <span class="cn">FALSE</span>,</span>
<span id="cb22-34"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="at">id =</span> <span class="st">"tweeted"</span>,</span>
<span id="cb22-35"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="at">type =</span> <span class="st">"warning"</span></span>
<span id="cb22-36"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-37"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-38"><a href="" aria-hidden="true" tabindex="-1"></a>    waiting <span class="ot">&lt;&lt;-</span> <span class="fu">runLater</span>({</span>
<span id="cb22-39"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"Actually sending tweet...</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb22-40"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="fu">removeNotification</span>(<span class="st">"tweeted"</span>)</span>
<span id="cb22-41"><a href="" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb22-42"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb22-43"><a href="" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-44"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>undo, {</span>
<span id="cb22-45"><a href="" aria-hidden="true" tabindex="-1"></a>    waiting<span class="sc">$</span><span class="fu">destroy</span>()</span>
<span id="cb22-46"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showNotification</span>(<span class="st">"Tweet retracted"</span>, <span class="at">id =</span> <span class="st">"tweeted"</span>)</span>
<span id="cb22-47"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateTextAreaInput</span>(session, <span class="st">"message"</span>, <span class="at">value =</span> last_message)</span>
<span id="cb22-48"><a href="" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb22-49"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<p><img data-src="imagenes/5.10.boton_arrepentimiento.gif" width="563"></p>
</div></div>
</section></section>
<section id="section-2" class="title-slide slide level1 theme-section2 center">
<h1></h1>
<div class="r-fit-text" style="transform: translateY(-15rem);">
<p>¡Muchas gracias!</p>
</div>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Realizado con el <a href="https://github.com/EmilHvitfeldt/talk-socalrug-hackathon-feature-engineering" target="_blank">template de emilhvitfeldt</a> para el <a href="https://github.com/RLadies-BA/mastering-shiny" target="_blank">Club de lectura Mastering Shiny</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-codewindow/codewindow.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealCodewindow, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script type="text/javascript">

    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>